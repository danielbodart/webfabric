<?xml version="1.0" encoding="UTF-8"?>
<project name="webfabric" basedir=".." default="release">

    <import file="${basedir}/build.xml"/>

    <taskdef classname="net.bluecow.googlecode.ant.GoogleCodeUploadTask"
             classpathref="all.dependancies"
             name="gcupload"/>

    <macrodef name="upload">
        <attribute name="file"/>
        <attribute name="summary" default="Build ${build.number}"/>
        <attribute name="labels" default="Web, Semantic, SiteMesh, StringTemplate"/>

        <sequential>
            <gcupload username="${release.username}" password="${release.password}"
                      projectname="${ant.project.name}"
                      filename="${distribution}/@{file}" targetfilename="@{file}"
                      summary="@{summary}" labels="@{labels}"/>
        </sequential>
    </macrodef>

    <target name="release" depends="build">
        <upload file="${release}.jar"/>
        <upload file="${release}.war"/>
    </target>


</project>
