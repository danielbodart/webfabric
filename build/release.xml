<?xml version="1.0" encoding="UTF-8"?>
<project default="release">

    <property name="distribution" value="output/dist"/>
    <property file="${distribution}/build.properties"/>
    <property name="release.name" value="0.${build.number}.${stored.build.number}"/>

    <taskdef classname="net.bluecow.googlecode.ant.GoogleCodeUploadTask"
             classpath="ant-googlecode-0.0.1.jar"
             name="gcupload"/>

    <macrodef name="upload">
        <attribute name="file"/>
        <attribute name="summary" default="Release ${release.name}"/>
        <attribute name="labels" default=""/>

        <sequential>
            <gcupload username="${release.username}" password="${release.password}"
                      projectname="webfabric"
                      filename="${distribution}/@{file}" targetfilename="@{file}"
                      summary="@{summary}" labels="@{labels}"/>
        </sequential>
    </macrodef>

    <target name="release">
        <upload file="${stored.build.name}.jar"/>
        <upload file="${stored.build.name}.src.zip"/>
        <!--upload file="${stored.build.name}.war"/-->
    </target>


</project>
